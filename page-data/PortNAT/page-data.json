{"componentChunkName":"component---src-templates-post-jsx","path":"/PortNAT/","result":{"data":{"site":{"siteMetadata":{"title":"Cho's Blog"}},"markdownRemark":{"id":"4b022313-cdc3-5705-98c7-a7a55fb066d7","excerpt":"NAT이란 사설 IP 주소를 공인 IP 주소로 변환하는 기술이다. IP 변환을 위해 NAT은 NAT 변환 테이블을 사용한다. NAT 변환 테이블 NAT 테이블은 네트워크 외부 IP와 내부 IP가 쌍으로 명시되어 있는 구조이다. 명시되어 있는 주소를 활용하며 네트워크 내부에서 네트워크 내부로 송신을 할 때 송신지 수소가 공인 IP로 변환되고 반대로 네트워크…","html":"<p>NAT이란 사설 IP 주소를 공인 IP 주소로 변환하는 기술이다. IP 변환을 위해 NAT은 <strong>NAT 변환 테이블</strong>을 사용한다.</p>\n<h2 id=\"NAT-변환-테이블\" style=\"position:relative;\"><a href=\"#NAT-%EB%B3%80%ED%99%98-%ED%85%8C%EC%9D%B4%EB%B8%94\" aria-label=\"NAT 변환 테이블 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>NAT 변환 테이블</h2>\n<p>NAT 테이블은 네트워크 외부 IP와 내부 IP가 쌍으로 명시되어 있는 구조이다. 명시되어 있는 주소를 활용하며 네트워크 내부에서 네트워크 내부로 송신을 할 때 송신지 수소가 공인 IP로 변환되고 반대로 네트워크 외부에서 송신될 때는 송신지 주소가 사설 IP로 변환되는 과정을 거친다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/blog/static/5067236528b1aa1ef133b025a6e63acb/4ab23/NT_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 55.88235294117647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACAUlEQVR42nVQiZKaUBDk/z8pi6CuiqsCuh7IKYfKpaiAxl2Pzjw2JltW8qq6Zmpmumf6cff7HQzsFUWBKIqQ5wc86s9gryxLhOs1dlkG/K49+twz4Xa7/VfoerngnBcoNxmKdIN0uUIaxzhRDf8SZGLX67UCy7+LXz4+K6E8TlGmW5w2O0R+AN9Z4BAm+CiPfwUfj1lZk5Xtdov8sEde5LT5q3c5nrCLYqzCCNvNBvluhz1ZzpMNztm+WnCjQ7jz+Vz9W0Yixf6AjKwkRGRxv83w83iE4zjQpzMkro+IsF54CF0PsRcg9ZeU+wjpWsbndrRpOp1iQaSUhKJ1iGVAQ6s1YsrTOMFc0zBWh/A0A4FpwzNMeKYF37AQ6Bb09wkmo3ekdD3HLC4Dv7LqLBwMhyNoJGCZBmzbRpwkyMha6PkwJjOoRNRmMxjzOc2YWOhGJTgdqFjRDOe6LlzPg0eRWTMtC7Zlw6RhBl3XoSgq+t03jPsyxgMFE1nBTBlCeetB7fWhqSMY40nlkmPXfMecNrPY7XYhCgIkSUK73Qb/wqMhiJAHA/SoNqQFzZoA4ccL5I5UWdaIyymKgmfIsoxmo4E6CXYZsdkEz/OoETokxnrd1xak5iskimyJoqoVl2Pbn9FqtSCQmCAKqNcblRhfq1W1er0OURT/zHY6na+cOCz+AgchH5qFhkfWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='송신지 주소와 수신지 주소의 변환을 NAT에서 담당한다' title='' src='/blog/static/5067236528b1aa1ef133b025a6e63acb/ca1dc/NT_1.png' srcset='/blog/static/5067236528b1aa1ef133b025a6e63acb/e7570/NT_1.png 170w,\n/blog/static/5067236528b1aa1ef133b025a6e63acb/f46e7/NT_1.png 340w,\n/blog/static/5067236528b1aa1ef133b025a6e63acb/ca1dc/NT_1.png 680w,\n/blog/static/5067236528b1aa1ef133b025a6e63acb/02d09/NT_1.png 1020w,\n/blog/static/5067236528b1aa1ef133b025a6e63acb/9d567/NT_1.png 1360w,\n/blog/static/5067236528b1aa1ef133b025a6e63acb/4ab23/NT_1.png 1462w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>송신지 주소와 수신지 주소의 변환을 NAT에서 담당한다</figcaption>\n  </figure></p>\n<p>하지만 위와 같은 방식으로 NAT이 작동한다면, 사설 IP와 공인 IP가 <code class=\"language-text\">1:1</code>로 대응되어야 한다. 즉 사설 IP의 개수만큼 공인 IP가 필요해 진다는 것이다. 이러면 NAT을 사용할 때와 사용하지 않을 때의 공인 IP 수가 같으므로 사설 IP와 공인 IP가 <code class=\"language-text\">1:n</code>의 관계가 되도록 해야한다. 이를 위해 포토가 사용된다.</p>\n<h2 id=\"NAPT\" style=\"position:relative;\"><a href=\"#NAPT\" aria-label=\"NAPT permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>NAPT</h2>\n<p>포트 기반 NAT를 <strong>NAPT(Network Address Port Translation)</strong> 혹은 <strong>APT(Address Port Translation)</strong> 이라고 한다. NAPT는 포트를 활용하여 하나의 공인 IP 주소를 여러 사설 IP 주소가 공유할 수 있도록 한다.</p>\n<p>NAT 테이블에 변환할 IP 주소 쌍과 함께 포트 번호도 기록하고 변환하여 하나의 공인 IP로 많은 사설 IP을 변환시키는 것이 가능하다. NAPT의 송수신 과정이 담긴 사진이다.\n<figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/blog/static/5c49bf23d2a13892701e30e64f9f2149/c0b05/NT_2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 57.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACD0lEQVR42lVRi3KiQBDk/3/o6qrOCKnzAVjEU6KJIaCEN8hL5TAk6eslF8tsVdfs7ux098xKHx8f+EJVVcjzHG3bQqzr3AXv72hPDeIgRBYnOJQV3nn39V66fvxt9XdXpLx6/duiyUucshznskYZJfBfPOSMb8x9IxQqXdddIM4CX/nu/Io6zlCEMUo6q+IUmR9g+/xM4hgNRbrz+ZNQrKZp4Ac+sixDVZTYpykOx+PFcMc2qySF5/tImavKEvk+R5FmOJLslO7RVgdIdV33D0rOLmeyyAT2yFlck7jjPG26WJv3KLwQuc/ZeQFj0O9LP8L+xedMA+zpVBKfsNttkQsSoqTqgURHAYo1dBnQlbN5Qrp1UUd0nmSfYNtHRiFgPW4Qez4JiwIFkSQJLDpxXbcncLdbxHGMlnPpXjk/OrZJalkWfM+D73rw+CEhRSJnB2f1gIBREu0KiOIoinqEYYgojOh8h/VqjSeSuLaDjbnqW7fWj9zf437+B+ulCZtnd2Mh2LmQbMeBbds9nP97VdUwHo9hGAY0TYMiK/15MZ9jYdzBnBl4mC9gjCcY3gxwN1HxsFjimR1KpmniGsvlEqPRCMPBDXRVhaZruL1VIMsyJryf6TNoI4pNVfy+kfHrx0/okylM1ol6SWXRNSYTqg6HUBSFRLcYDAY9mUyXSh9ljOh2Op3272e6TlH9Uv8PzjcoegerTc8AAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='포트가 추가 됨으로 하나의 공인 IP를 여러 사설 IP 변환에 사용 가능해 진다' title='' src='/blog/static/5c49bf23d2a13892701e30e64f9f2149/ca1dc/NT_2.png' srcset='/blog/static/5c49bf23d2a13892701e30e64f9f2149/e7570/NT_2.png 170w,\n/blog/static/5c49bf23d2a13892701e30e64f9f2149/f46e7/NT_2.png 340w,\n/blog/static/5c49bf23d2a13892701e30e64f9f2149/ca1dc/NT_2.png 680w,\n/blog/static/5c49bf23d2a13892701e30e64f9f2149/02d09/NT_2.png 1020w,\n/blog/static/5c49bf23d2a13892701e30e64f9f2149/9d567/NT_2.png 1360w,\n/blog/static/5c49bf23d2a13892701e30e64f9f2149/c0b05/NT_2.png 1752w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>포트가 추가 됨으로 하나의 공인 IP를 여러 사설 IP 변환에 사용 가능해 진다</figcaption>\n  </figure></p>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>정리</h2>\n<ul>\n<li>NAT는 사설 IP를 공인 IP로 변환하는 기술이다. NAT 변환 테이블을 사용하여 변환을 진행한다.</li>\n<li>일반 NAT은 사설 IP와 공인 IP를 <code class=\"language-text\">1:1</code>로 사용해야 하기 때문에 IP 부족 문제를 해결할 수 없다.</li>\n<li>사설 IP와 공인 IP의 <code class=\"language-text\">1:n</code> 사용을 위한 기술로 포트 정보까지 포함하여 변환하는 NAPT(혹은 APT)기술이 있다.</li>\n</ul>","frontmatter":{"title":"포트 기반 NAT","date":"May 10, 2025","update":"May 10, 2025","tags":["NAT","Network","전송계층"],"series":"혼자 공부하는 네트워크"},"fields":{"slug":"/PortNAT/","readingTime":{"minutes":2.83}}},"seriesList":{"edges":[{"node":{"id":"d7e4a629-d0cf-5fe1-ba70-9248990d30d3","fields":{"slug":"/StartNetwork/"},"frontmatter":{"title":"컴퓨터 네트워크 찍어먹기"}}},{"node":{"id":"73ae3d31-a3bf-5caf-a54f-185a7c3504a0","fields":{"slug":"/Ethernet/"},"frontmatter":{"title":"이더넷은 무엇인가"}}},{"node":{"id":"7e3487fc-8bf9-5b41-97a9-0f1b6af48b2b","fields":{"slug":"/NICAndCable/"},"frontmatter":{"title":"NIC와 케이블"}}},{"node":{"id":"7d6b51b9-570b-5dbc-86ae-1cf397dcbdb3","fields":{"slug":"/NetworkHub/"},"frontmatter":{"title":"허브"}}},{"node":{"id":"1f35b10b-2265-5c7d-94ad-fb2899a9866d","fields":{"slug":"/NetworkSwitch/"},"frontmatter":{"title":"스위치 (딸깍)"}}},{"node":{"id":"c3df0ad3-6d55-5281-b0a2-fba7c306a3a6","fields":{"slug":"/NetworkLayer/"},"frontmatter":{"title":"LAN을 넘어서는 네트워크 계층"}}},{"node":{"id":"1dc64a67-75d2-5b8f-a8d3-1811d8c49993","fields":{"slug":"/NetworkIPAddress/"},"frontmatter":{"title":"IP 주소"}}},{"node":{"id":"d00163a5-202b-5072-ac15-7daf2ecfe528","fields":{"slug":"/NetworkRouting/"},"frontmatter":{"title":"라우팅"}}},{"node":{"id":"d96a9462-f669-5fa5-850d-3f87327212ba","fields":{"slug":"/LimitOfIpAndAboutPort/"},"frontmatter":{"title":"IP의 한계와 포트"}}},{"node":{"id":"4b022313-cdc3-5705-98c7-a7a55fb066d7","fields":{"slug":"/PortNAT/"},"frontmatter":{"title":"포트 기반 NAT"}}},{"node":{"id":"601af995-41a7-5b33-baf4-fbc7b350881f","fields":{"slug":"/PortForwarding/"},"frontmatter":{"title":"포트포워딩"}}},{"node":{"id":"ed3bbb64-b393-5247-84ff-8d8c5df7a7d8","fields":{"slug":"/ICMP/"},"frontmatter":{"title":"ICMP"}}},{"node":{"id":"20d44432-46fa-5c98-91ff-170f0579a6ca","fields":{"slug":"/TCPAndUDP/"},"frontmatter":{"title":"TCP와 UDP"}}},{"node":{"id":"9efc28d3-1946-58e8-a2a3-2de57b179d47","fields":{"slug":"/TCPControl/"},"frontmatter":{"title":"TCP의 오류・흐름・혼잡 제어"}}},{"node":{"id":"602e5618-4b79-53ff-81db-4aacd496a9ea","fields":{"slug":"/DNS/"},"frontmatter":{"title":"DNS와 자원"}}},{"node":{"id":"2a7d2fde-d96b-597b-a234-ef44d404f4df","fields":{"slug":"/HTTP/"},"frontmatter":{"title":"HTTP"}}},{"node":{"id":"8ce3c921-40a8-5c1f-a269-c9a743a4ec3e","fields":{"slug":"/StabilitySkill/"},"frontmatter":{"title":"네트워크의 안정성을 위한 기술"}}},{"node":{"id":"e825178a-1e4e-5cfb-9850-d97808262d7e","fields":{"slug":"/HTTPHeader/"},"frontmatter":{"title":"HTTP 헤더"}}},{"node":{"id":"10454511-fcbb-5293-a402-3cd49b01efd7","fields":{"slug":"/HTTPCache/"},"frontmatter":{"title":"HTTP 캐시"}}},{"node":{"id":"42ea408a-aa21-587a-99ea-5d3091998d2c","fields":{"slug":"/HTTPCookie/"},"frontmatter":{"title":"HTTP 쿠키"}}}]},"previous":{"fields":{"slug":"/LimitOfIpAndAboutPort/"},"frontmatter":{"title":"IP의 한계와 포트"}},"next":{"fields":{"slug":"/PortForwarding/"},"frontmatter":{"title":"포트포워딩"}}},"pageContext":{"id":"4b022313-cdc3-5705-98c7-a7a55fb066d7","series":"혼자 공부하는 네트워크","previousPostId":"d96a9462-f669-5fa5-850d-3f87327212ba","nextPostId":"601af995-41a7-5b33-baf4-fbc7b350881f"}},"staticQueryHashes":[],"slicesMap":{}}