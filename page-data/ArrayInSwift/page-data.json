{"componentChunkName":"component---src-templates-post-jsx","path":"/ArrayInSwift/","result":{"data":{"site":{"siteMetadata":{"title":"Cho's Blog"}},"markdownRemark":{"id":"bb407af6-3522-5120-8317-51d7188634b5","excerpt":"값 타입과 참조 타입 Swift의 값에는 값 타입과 참조 타입이라는 종류가 있다. 흔히 Class와 Struct의 차이점이 무엇인지 대답할때 사용하곤 하는데, 정확한 뜻은 아래와 같다.  참조 타입 값 타입 의미 데이터를 전달할 때 값의 메모리 위치를 전달 데이터를 전달할 때 값을 복사하여 전달 예시 Class, Closures Struct, Enum, …","html":"<h2 id=\"값-타입과-참조-타입\" style=\"position:relative;\"><a href=\"#%EA%B0%92-%ED%83%80%EC%9E%85%EA%B3%BC-%EC%B0%B8%EC%A1%B0-%ED%83%80%EC%9E%85\" aria-label=\"값 타입과 참조 타입 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>값 타입과 참조 타입</h2>\n<p>Swift의 값에는 값 타입과 참조 타입이라는 종류가 있다. 흔히 Class와 Struct의 차이점이 무엇인지 대답할때 사용하곤 하는데, 정확한 뜻은 아래와 같다.</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>참조 타입</th>\n<th>값 타입</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>의미</td>\n<td>데이터를 전달할 때 값의 메모리 위치를 전달</td>\n<td>데이터를 전달할 때 값을 복사하여 전달</td>\n</tr>\n<tr>\n<td>예시</td>\n<td>Class, Closures</td>\n<td>Struct, Enum, Int, String, Array, Set 등 기본 타입</td>\n</tr>\n<tr>\n<td>메모리 저장 위치</td>\n<td>힙(Heap) 메모리</td>\n<td>스택(Stack) 메모리</td>\n</tr>\n</tbody>\n</table>\n<p>여기서 메모리에 대해 조금 공부해본 경우, 힙 메모리에는 <strong>동적인 데이터</strong>가 들어가고 스택 메모리에는 <strong>정적인 데이터</strong>가 들어갈 수 있다는 것을 알 수 있는데, Swift에서는 이상하게 Array나 Set 같은 동적으로 관리해야 하는 자료형도 값 타입으로 분류되어 스택 메모리에 저장된다는 모순점을 찾을 수 있다. </p>\n<p>왜 그럴까?</p>\n<h2 id=\"Array는-사실-힙-메모리에-저장된다\" style=\"position:relative;\"><a href=\"#Array%EB%8A%94-%EC%82%AC%EC%8B%A4-%ED%9E%99-%EB%A9%94%EB%AA%A8%EB%A6%AC%EC%97%90-%EC%A0%80%EC%9E%A5%EB%90%9C%EB%8B%A4\" aria-label=\"Array는 사실 힙 메모리에 저장된다 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>Array는 사실 힙 메모리에 저장된다</h2>\n<p>Swift에서 Array는 값 타입이지만 힙 메모리와 스택 메모리를 둘다 사용한다.</p>\n<p>정확하게는,</p>\n<p>Array의 <strong>메타데이터(길이, 용량, 참조 포인터 등..)는 스택 메모리에 저장</strong>되고,<br><strong>실제 원소들([1, 2, 3 ...])은 힙 메모리</strong>에 저장된다.</p>\n<p>이런 방식을 사용해서 Swift의 Array를 비롯한 컬렉션 타입(Collection Types)은 값 타입의 특성을 지니면서 동적인 크기를 가진 자료형이 될 수 있던 것이다.</p>\n<h2 id=\"COWCopy-On-Write-전략\" style=\"position:relative;\"><a href=\"#COWCopy-On-Write-%EC%A0%84%EB%9E%B5\" aria-label=\"COWCopy On Write 전략 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>COW(Copy-On-Write) 전략</h2>\n<p>COW 전략은 Swift의 값 타입 메모리를 효율적으로 사용할 수 있는 기법이다.</p>\n<p>값 타입은 값을 복사하여 데이터를 전달하기 때문에 만약 복사해야 할 값이 매우 큰 사이즈라면 복사하는 작업 만으로도 많은 리소스를 필요로 할 것이다. 그리고 만약 값을 복사했는데 사용하지 않는다면 이는 큰 자원 손실로 이어질 것이다.</p>\n<p>이런 문제를 해결하기 위해 Swift에서는 <strong>값의 변경이 일어나는 시점에서 복사를 진행</strong>하는 방법을 사용한다. 이름 그대로 쓰기(Write)를 할 때 복사(Copy)하는 전략인 것이다.</p>\n<p>Array, Set, Dictionary와 같은 컬렉션 타입들은 모두 COW를 사용해 메모리를 효율적으로 관리하고 있는 것이다.</p>","frontmatter":{"title":"Swift에서 Array를 관리하는 방법","date":"October 14, 2025","update":"October 14, 2025","tags":["Copy-On-Write","Swift"],"series":"iOS"},"fields":{"slug":"/ArrayInSwift/","readingTime":{"minutes":3.2}}},"seriesList":{"edges":[{"node":{"id":"e610c2bc-9982-5295-be29-03c5c52264ed","fields":{"slug":"/UIColorAndCGColor/"},"frontmatter":{"title":"UIColor과 CGColor은 뭐가 다른걸까"}}},{"node":{"id":"1fd88818-59e2-54c7-8b0b-f2f9c9bf7480","fields":{"slug":"/FixMemoryLeak/"},"frontmatter":{"title":"메모리 릭 잡고 성능 최적화하기"}}},{"node":{"id":"7f148eea-f335-51f6-8487-d0158dcb8e30","fields":{"slug":"/TrimString/"},"frontmatter":{"title":"Swift에서 문자열 예쁘게 만들기"}}},{"node":{"id":"bb407af6-3522-5120-8317-51d7188634b5","fields":{"slug":"/ArrayInSwift/"},"frontmatter":{"title":"Swift에서 Array를 관리하는 방법"}}}]},"previous":{"fields":{"slug":"/DNSRecord/"},"frontmatter":{"title":"DNS 레코드"}},"next":{"fields":{"slug":"/MakePrescriptionOCR/"},"frontmatter":{"title":"iOS에서 처방전 약 이름 추출하기"}}},"pageContext":{"id":"bb407af6-3522-5120-8317-51d7188634b5","series":"iOS","previousPostId":"47a7d81b-031f-57a4-a65c-3b00d071d6d9","nextPostId":"bc111f63-d3fc-58ae-8386-80ce82649ca0"}},"staticQueryHashes":[],"slicesMap":{}}